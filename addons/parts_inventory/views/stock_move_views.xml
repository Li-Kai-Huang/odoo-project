<odoo>
  <!-- Tree -->
  <record id="view_stock_move_tree" model="ir.ui.view">
    <field name="name">parts.inventory.stock.move.tree</field>
    <field name="model">parts.inventory.stock.move</field>
    <field name="arch" type="xml">
      <tree>
        <field name="date"/>
        <field name="move_type"/>
        <field name="quantity"/>
        <field name="state" readonly="1"/>
        <field name="note"/>
      </tree>
    </field>
  </record>
  <!-- Form -->
  <record id="view_stock_move_form" model="ir.ui.view">
    <field name="name">parts.inventory.stock.move.form</field>
    <field name="model">parts.inventory.stock.move</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <!-- 草稿 → 送審 -->
          <button name="action_submit" type="object" string="Submit"
          class="oe_highlight"
          invisible="state != 'draft'"/>
          <!-- 待審 → 核准（僅 Manager 可見） -->
          <button name="action_approve" type="object" string="Approve"
          class="oe_highlight"
          groups="parts_inventory.group_parts_manager"
          invisible="state != 'to_approve'"/>
          <!-- 待審 → 退回（僅 Manager 可見） -->
          <button name="action_reject" type="object" string="Reject"
          class="btn-secondary"
          groups="parts_inventory.group_parts_manager"
          invisible="state != 'to_approve'"/>
        </header>
        <sheet>
          <group>
            <field name="part_id" options="{'no_create_edit': True}"/>
            <field name="move_type"/>
            <field name="quantity"/>
            <field name="date"/>
            <field name="state" readonly="1"/>
            <field name="note"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>
  <!-- 從 Part 打開：只看該 Part 的 Moves -->
  <record id="action_moves_from_part" model="ir.actions.act_window">
    <field name="name">Team Moves</field>
    <field name="res_model">parts.inventory.stock.move</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('part_id', '=', active_id)]</field>
    <field name="context">{}</field>
    <field name="target">current</field>
  </record>
  <!-- 從產品 Smart Button 打開（暫給空 domain） -->
  <record id="action_team_moves" model="ir.actions.act_window">
    <field name="name">Team Moves</field>
    <field name="res_model">parts.inventory.stock.move</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[]</field>
    <field name="context">{}</field>
    <field name="target">current</field>
  </record>
</odoo>